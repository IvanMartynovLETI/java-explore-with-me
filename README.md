# Java-Explore-With-Me

Проект представляет собой реализацию бэкенда сервиса “Афиша” и позволяет осуществлять следующие действия:
* Создание, редактирование, получение, поиск, а также публикация либо отклонение события.
* Добавление, получение или удаление пользователя.
* Создание, редактирование, удаление или получение пользователя.
* Создание, получение или отмена запросов на участие в событии.
* Создание, редактирование, получение или удаление подборки событий.
* Сохранение информации об отправлении пользователем запроса на uri определенного сервиса.
* Получение статистики посещения uri определенного сервиса пользователями.
* Возможность оставления комментариев пользователями определенного события.

Приложение состоит из двух сервисов – основного, обеспечивающего функционирование продукта, и сервиса статистики, хранящего 
количество просмотров и позволяющего делать различные выборки для анализа работы приложения.
#
Сервис статистики обеспечивает:
* Сбор информации о количестве обращений пользователей к спискам событий.
* Сбор данных о количестве запросов к подробной информации о событии.

Со спецификацией Swagger API сервиса статистики можно ознакомиться [здесь](https://github.com/IvanMartynovLETI/java-explore-with-me/blob/main/ewm-stats-service-spec.json)
#
API основного сервиса состоит из трех частей:
* Публичной,доступной без регистрации любому пользователю сети.
* Закрытой, доступной только авторизованным пользователям.
* Административной, доступной только администраторам сервиса.
  
Со спецификацией Swagger API основного сервиса можно ознакомиться [здесь](https://github.com/IvanMartynovLETI/java-explore-with-me/blob/main/ewm-main-service-spec.json). 

В качестве дополнительной функциональности выбраны комментарии, которые интегрированы в основной сервис.
#
# Дополнительная функциональность-комментарии

API дополнительной функциональности резделены на две части:
* Публичная, доступная без регистрации любому пользователю сети и предоставляет возможности поиска комментариев как по
  идентификатору отдельного комментария, так и всех комментариев заданного события.
* Закрытая доступна только авторизованным пользователям и реализует возможности создания, редактирования и удаления своих
  комментариев.

#
API публичной части обеспечивает следующий функционал:
* Поиск комментария по его идентификатору.
* Поиск всех комментариев события с пагинацией и сортировкой по дате создания и редактирования.

#
API для авторизованных пользователей обеспечивает им возможность создания, редактирования и удаления
своих комментариев.

#
С целью реализации вышеописанного функционала был создан набор эндпойнтов:

</details>

<details><summary>Эндпойнты публичной части API:</summary>

* GET /commets/{commentId} - получение полной информации и комментарии по его идентификатору.
* GET /comments/events/{eventId} - получение списка комментариев к событию.

</details>

</details>

<details><summary>Эндпойнты закрытой части API:</summary>

* POST /users/{userId}/comments - создание комментария авторизованным пользователем.
* PATCH /users/{userId}/comments/{commentId} - редактирование авторизованным пользователем
  своего комментария.
* DELETE /users/{userId}/comments/{commentId}/delete - удаление авторизованным пользователем
  своего комментария.

</details>


# 
Приложение выполнено на основе микросервисной архитектуры и поднимается в четырех контейнерах:
main_container (основной сервис), main_db_container (БД основного сервиса), statistics_container (сервер статистики)
и statistics_db_container (БД сервиса статистики). Для запуска приложения необходио выполнить команды mvn clean install и
docker-compose up. Приложение доступно по адресу localhost:8080.

#
Проект реализован на Java 11 с использованием следующих технологий:
* Spring Boot
* Spring Framework
* JPA (Hibernate ORM)
* Lombok
* Maven
* PostgreSQL
* SLF4J
* Mockito
* Docker
* JUnit
* REST API

#
Схема базы данных приложения имеет следующий вид:

![Диаграмма базы данных](/full_db_diagram.png)

#
#Ссылка: https://github.com/IvanMartynovLETI/java-explore-with-me/pull/5
